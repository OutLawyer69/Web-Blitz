<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
</head>
<body>
    <div id="root"></div>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script type="text/babel">
        function App() {
            const [id, setId] = React.useState("");
            const [password, setPassword] = React.useState("");
            const [newPassword, setNewPassword] = React.useState("");
            const [message, setMessage] = React.useState("");
            const [userDB, setUserDB] = React.useState([{ id: "hitesh@gmail.com", password: "123456" }]);
            const [isSignIn, setIsSignIn] = React.useState(true);
            const [isChangePassword, setIsChangePassword] = React.useState(false);
            const [showPassword, setShowPassword] = React.useState(false);

            const formStyle = {
                backgroundColor: "rgb(166, 95, 217)",
                borderRadius: "8px",
                padding: "30px 50px",
                width: "320px",
                textAlign: "center",
                fontFamily: "Arial Black"
            };

            function handleCheck() {
                let user = userDB.find(user => user.id === id);
                if (!id || !password) {
                    setMessage("Please enter ID and Password");
                } else if (user) {
                    if (user.password === password) {
                        setMessage("Sign-in Success");
                        setTimeout(() => window.location.href = "index.html", 1000);
                    } else {
                        setMessage("Password does not match");
                    }
                } else {
                    setMessage("User not found/Invalid Id");
                }
            }

            function handleCheckUp() {
                if (!id || !password) {
                    setMessage("Please enter ID and Password");
                } else if (userDB.find(user => user.id === id)) {
                    setMessage("This account already exists. Please sign in.");
                } else {
                    setUserDB([...userDB, { id, password }]);
                    setMessage("Account created successfully!");
                }
            }

            function handleChangePassword() {
                let userIndex = userDB.findIndex(user => user.id === id);
                if (!id || !password || !newPassword) {
                    setMessage("Please enter all fields");
                } else if (userIndex === -1) {
                    setMessage("User not found");
                } else if (userDB[userIndex].password !== password) {
                    setMessage("Current password is incorrect");
                } else {
                    let updatedUsers = [...userDB];
                    updatedUsers[userIndex].password = newPassword;
                    setUserDB(updatedUsers);
                    setMessage("Password changed successfully!");
                }
            }

            return (
                <div style={{ justifyContent: "center", alignItems: "center", display: "flex", height: "100vh", backgroundColor: "rgb(238, 214, 247)", padding: "20px" }}>
                    {isChangePassword ? (
                        <div style={formStyle}>
                            <h2>Change Password</h2>
                            <label>Email ID</label><br />
                            <input type="email" placeholder="Enter Email-ID" onChange={(e) => setId(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} /><br />
                            <label>Current Password</label><br />
                            <input type="password" placeholder="Current Password" onChange={(e) => setPassword(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} /><br />
                            <label>New Password</label><br />
                            <input type="password" placeholder="New Password" onChange={(e) => setNewPassword(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} /><br />
                            <button onClick={handleChangePassword} style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", padding: "10px 15px", border: "none", cursor: "pointer" }}>Change Password</button>
                            <p style={{ color: "red" }}>{message}</p>
                            <button onClick={() => setIsChangePassword(false)} style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", border: "none", cursor: "pointer" }}>Back</button>
                        </div>
                    ) : isSignIn ? (
                        <div style={formStyle}>
                            <h2>Sign In</h2>
                            <label>Email ID</label><br />
                            <input type="email" placeholder="Enter Email-ID" onChange={(e) => setId(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} /><br />
                            <label>Password</label><br />
                            <input type={showPassword ? "text" : "password"} placeholder="Enter Password" onChange={(e) => setPassword(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} />
                            <input type="button" value={showPassword ? "🙈" : "👁"} onClick={() => setShowPassword(!showPassword)} style={{ marginLeft: "10px", cursor: "pointer" }} /><br />
                            <button onClick={handleCheck} style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", padding: "10px 15px", border: "none", cursor: "pointer" }}>Sign In</button>
                            <p>Don't have an account? <button onClick={() => setIsSignIn(false)} style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", border: "none", cursor: "pointer" }}>Create New Account</button></p>
                            <input style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", padding: "10px 15px", border: "none", cursor: "pointer" }} type="button" value="Change password" onClick={()=>setIsChangePassword(true)}/>
                            <p style={{ color: "red" }}>{message}</p>
                        </div>
                    ) : (
                        <div style={formStyle}>
                            <h2>Create New Account</h2>
                            <label>Email ID</label><br />
                            <input type="email" placeholder="Enter Email-ID" onChange={(e) => setId(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} /><br />
                            <label>Password</label><br />
                            <input type="password" placeholder="Enter Password" onChange={(e) => setPassword(e.target.value)} style={{ width: "100%", borderRadius: "6px", padding: "8px", marginBottom: "10px" }} /><br />
                            <button onClick={handleCheckUp} style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", padding: "10px 15px", border: "none", cursor: "pointer" }}>Sign Up</button>
                            <p>Already have an account? <button onClick={() => setIsSignIn(true)} style={{ borderRadius: "6px", color: "white", backgroundColor: "rgb(113, 61, 151)", border: "none", cursor: "pointer" }}>Sign In</button></p>
                            <p style={{ color: "red" }}>{message}</p>
                        </div>
                    )}
                </div>
            );
        }
        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>
</html>